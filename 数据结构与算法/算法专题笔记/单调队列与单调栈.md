## 单调队列

### 一、定义

> 队列中的元素从头到尾满足单调性。以递增队列为例，如果新来元素大于等于队尾元素则直接入队，否则从队尾开始依次将比新来元素大的元素出队，以此来保证单调性。
>
> 
>
> 

### 二、基本思想

> 1. 对**优先队列**的改良：单调队列O(N)
>
> 2. 同样维护队首元素作为答案，去掉多余的元素（维护单调性）
>
> 3. 队列里的每个元素用一个二元组（id,val）表示，每次从队尾入队，删除队尾的无用元素，保证编号递增，值递减。

### 三、应用



## 单调栈

### 一、定义

> 从栈底元素到栈顶元素呈单调递增或单调递减，栈中的元素从栈底到栈顶满足单调性。以递增栈为例，如果新来元素大于等于栈顶元素则直接入栈，否则从栈顶开始依次将比新来元素大的元素出栈，以此来保证单调性。
>



### 二、基本思想

> (1)当新元素在单调性上优于栈顶时（单增栈新元素比栈顶大，单减栈新元素比栈顶小），压栈，栈深+1；
>
> (2)当新元素在单调性与栈顶相同（新元素于栈顶相同）或劣于栈顶时（单增栈新元素比栈顶小，单减栈新元素比栈顶大），弹栈，栈深-1；
>
> 单调栈模板
>
> ```
> //单调递增栈
> //在入栈之前记录当前元素左边第一个比他小的元素的下标
> for(int i = 1 ; i <= n;i++){
>     while(st.size() && a[st.top()] >= a[i])
>       st.pop();
>     if(st.empty())
>       L[i] = -1;
>     else
>       L[i] = st.top();
>     st.push(i);
> }
> 
> //单调递减栈的模板
> //栈中的元素为单调递减的，若当前元素比栈顶元素大，所以栈顶元素为第一个比当前元素小的数。
> //到最后栈中剩余元素表示这些元素左边没有比它小的元素。
> for(int i = 1;i <= n;i++){
> 	while(st.size() && a[i] > a[st.top()]){
> 		L[st.top()] = i;
> 		st.pop();
> 	}
> 	st.push(i);
> }
> while(!st.empty()){
> 	L[st.top()] = -1;
> 	st.pop();
> }
> 
> ```
>
> 

### 三、应用



#### [42. 接雨水](https://leetcode-cn.com/problems/trapping-rain-water/)

#### [84. 柱状图中最大的矩形](https://leetcode-cn.com/problems/largest-rectangle-in-histogram/)

>  维护一个单调栈，栈中总是保存递增元素的索引，当遇到比栈顶元素小的元素时，将栈顶元素依次出栈，每次都计算栈中的bar能围成的面积，直到栈顶元素小于当前元素就停止出栈。 

#### [739. 每日温度](https://leetcode-cn.com/problems/daily-temperatures/)

